<!DOCTYPE html>
<html>
<head>
	<title>Learn Gradients</title>
	<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-debug.js"></script>
	<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>
	<script type="text/javascript" src="https://d3js.org/d3-selection-multi.v1.min.js"></script>-->
	<script type="text/javascript" src="./ko/knockout-3.4.2.debug.js"></script>
	<script type="text/javascript" src="./d3/d3.v5.js"></script>
	<script type="text/javascript" src="./d3-selection-multi/d3-selection-multi.js"></script>
	<script type="text/javascript" src="./mathjax-2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
	<script type="text/javascript" src="./js/space2dim.js"></script>
	<script type="text/javascript" src="./js/space3dim.js"></script>
	<script type="text/javascript" src="./js/mathfunction3d.js"></script>

	<link rel="stylesheet" type="text/css" href="./css/article.css">
	<link rel="stylesheet" type="text/css" href="./css/space2dim.css">
	<link rel="stylesheet" type="text/css" href="./css/space3dim.css">
	<link rel="stylesheet" type="text/css" href="./css/vector.css">
	<link rel="stylesheet" type="text/css" href="./css/line.css">

	<style>
		.redFunc {
			stroke: #ff0000;
			stroke-width: 1;
			fill: #ff0000;
		}

		.blueFunc {
			stroke: #000000;
			stroke-width: 1;
			fill: #ffffff;
		}

	</style>

</head>
<body>
	<div>
		<div style="width:100%">
			<div id="space2dimdiv"></div>
		</div>
		<div>
			<input type="range" min="0" max="1" step="0.01" data-bind="value: Concave.lambda, valueUpdate: 'input'" />
		</div>
		<div>
			<input type="range" min="0" max="1" step="0.01" data-bind="value: Concave.lambda, valueUpdate: 'input'" />
		</div>
		<div style="width:100%">
			<div id="space3dimdiv"></div>
		</div>
	</div>

	<script type="text/javascript">

		let redCurve = function () {

			let f = function (x, y) {
				//return Math.sin(Math.sqrt(x * x + y * y) / 5 * Math.PI) * 10;
				//return Math.sqrt(x * x + y * y);
				return 0.005 * (x * x + y * y);
			}

			return f;
		};

		let blueCurve1 = function () {

			let f = function (x, y) {
				//return Math.sin(Math.sqrt(x * x + y * y) / 5 * Math.PI) * 10;
				//return Math.sqrt(x * x + y * y);
				return 10 + (0.005 * (x * x + y * y));
			}

			return f;
		};

		let blueCurve2 = function () {

			let f = function (x, y) {
				//return Math.sin(Math.sqrt(x * x + y * y) / 5 * Math.PI) * 10;
				//return Math.sqrt(x * x + y * y);
				return /*10 +*/ (0.005 * (x * x + y * y));
			}

			return f;
		};

		function createSpace2Dim() {
			let space2dimvsum = new Space2Dim("space2dimdiv", 100, 100, -50, 50, -50, 50);
			space2dimvsum.show();
		}

		function createSpace3Dim() {
			let space3dimvsum = new Space3Dim("space3dimdiv", 100, 100, -50, 50, -50, 50);
			let lineWidth = 2;
			let partialDerivYAt = 25;
			let partialDerivXAt = 10;

			function ViewModel() {
				this.funcsToShow = [];

				let partialDerivY = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 10, sampleFreqX: 2, xrange: [partialDerivYAt + -1 * lineWidth, partialDerivYAt + lineWidth], yrange: [-50, 50], cssclass: "redFunc" });
				this.funcsToShow.push(partialDerivY);

				let partialDerivX = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 2, sampleFreqX: 10, xrange: [-50, 50], yrange: [partialDerivXAt + -1 * lineWidth, partialDerivXAt + lineWidth] , cssclass: "redFunc" });
				this.funcsToShow.push(partialDerivX);

				let deriveFunc11 = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 10, xrange: [-50, partialDerivYAt + -1 * lineWidth], yrange: [-50, partialDerivXAt + -1 * lineWidth], cssclass: "blueFunc" });
				this.funcsToShow.push(deriveFunc11);

				let deriveFunc12 = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 10, xrange: [-50, partialDerivYAt + -1 * lineWidth], yrange: [partialDerivXAt + lineWidth, 50], cssclass: "blueFunc" });
				this.funcsToShow.push(deriveFunc12);

				let deriveFunc21 = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 10, xrange: [partialDerivYAt + lineWidth, 50], yrange: [-50, partialDerivXAt + -1 * lineWidth], cssclass: "blueFunc" });
				this.funcsToShow.push(deriveFunc21);

				let deriveFunc22 = new Function3Dim(
					{ func: redCurve() },
					{ sampleFreq: 10, xrange: [partialDerivYAt + lineWidth, 50], yrange: [partialDerivXAt + lineWidth, 50], cssclass: "blueFunc" });
				this.funcsToShow.push(deriveFunc22);

				//this.funcsToShow = [partialDerivX, partialDerivY, blueFunc1, blueFunc2];
			}

			let vmfunc = new ViewModel();

			//space3dimvsum.registerHandler(Function3Dim.draw, Function3Dim.update, function () { return vmfunc.funcsToShow; });
			space3dimvsum.registerMeshProvider(Function3Dim.getMeshData, function () { return vmfunc.funcsToShow; });
			space3dimvsum.show();
		}

		createSpace2Dim();
		createSpace3Dim();

	</script>
</body >
</html >
