<!DOCTYPE html>
<html>
<head>
	<title>Learn Vector math</title>
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
		showProcessingMessages: false,
		tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] }
		});
	</script>
	<script type="text/javascript" src="./MathJax-2.7.5/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
	<script type="text/javascript" src="./ko/knockout-3.4.2.debug.js"></script>
	<script type="text/javascript" src="./d3/d3.v5.js"></script>
	<script type="text/javascript" src="./d3-selection-multi/d3-selection-multi.js"></script>
	<script type="text/javascript" src="./js/mathexpressions.js"></script>
	<script type="text/javascript" src="./js/space2dim.js"></script>
	<script type="text/javascript" src="./js/point.js"></script>
	<script type="text/javascript" src="./js/circle.js"></script>
	<script type="text/javascript" src="./js/vector.js"></script>

	<link rel="stylesheet" type="text/css" href="./css/article.css">
	<link rel="stylesheet" type="text/css" href="./css/space2dim.css">
	<link rel="stylesheet" type="text/css" href="./css/vector.css">

	<style>
		.vectorline.vtranslated {
			stroke: #ff6a00;
			stroke-width: 2;
			fill: #ff6a00;
		}

		.vectorarrow.vtranslated {
			stroke: #ff6a00;
			stroke-width: 1;
			fill: #ff6a00;
		}

		.vectorline.calcresult {
			stroke: #00ff21;
			stroke-width: 2;
			fill: #00ff21;
		}

		.vectorarrow.calcresult {
			stroke: #00ff21;
			stroke-width: 1;
			fill: #00ff21;
		}
	</style>

</head>
<body>
	<div>
		<h1>Sum of Vectors</h1>
		<p>Two vector in 2-dimensional space:</p>
		<p>
			$$ \begin{aligned}
			a &= (a_1, a_2), \text{ in }\mathbb{R}^2\\
			b &= (b_1, b_2), \text{ in }\mathbb{R}^2
			\end{aligned}$$
		</p>
		<p>The sum of two vectors is the vector resulting from the addition of the components of the original vectors:</p>
		<p>
			$$\begin{aligned}
			c &= a + b\\
			&= (a_1 + b_1, a_2 + b_2)
			\end{aligned}$$
		</p>
		<p>A sample:</p>
		<div class="sample_container_height100">
			<div id="vectorsum_sample">
				$${}$$
			</div>
		</div>
	</div>
	<div style="width:100%">
		<div id="vectoraddition" class="divcentered"></div>
	</div>
	<div>
		<h1>Difference of Vectors</h1>
		<p>Two vectors in 2-dimensional space:</p>
		<p>
			$$ \begin{aligned}
			a &= (a_1, a_2), \text{ in }\mathbb{R}^2\\
			b &= (b_1, b_2), \text{ in }\mathbb{R}^2
			\end{aligned}$$
		</p>
		<p>The difference of two vectors is the vector resulting from the differences of the components of the original vectors:</p>
		<p>
			$$\begin{aligned}
			c &= a - b\\
			&= (a_1 - b_1, a_2 - b_2)
			\end{aligned}$$
		</p>
		<p>A sample:</p>
		<div class="sample_container_height100">
			<div id="vectordiff_sample">
				$${}$$
			</div>
		</div>
	</div>
	<div style="width:100%">
		<div id="vectorsubtraction" class="divcentered"></div>
	</div>
	<div>
		<h1>Scalar multiplication</h1>
		<p>A vector $a$ in 2-dimensional space and a scalar $\\lambda$ (a number):</p>
		<p>
			$$ \begin{aligned}
			a &= (a_1, a_2), \text{ in }\mathbb{R}^2\\
			\lambda
			\end{aligned}$$
		</p>
		<p>A vector multiplied by a scalar is the vector resulting of the multiplication of each component of the original vector by the scalar:</p>
		<p>
			$$\begin{aligned}
			c &= \lambda a\\
			&= (\lambda a_1, \lambda a_2)
			\end{aligned}$$
		</p>
		<p>A sample:</p>
		<div class="sample_container_height100">
			<div id="vectormult_sample">
				$${}$$
			</div>
		</div>
	</div>
	<div style="width:100%">
		<p>Change the value of scalar $\\lambda$ by dragging the slider:</p>
		<div class="divcentered">
			<input type="range" min="-5" max="5" step="0.1" data-bind="value: multiplyer, valueUpdate: 'input'" />
		</div>
		<div id="vectorscalarmulti" class="divcentered"></div>
	</div>

	<script type="text/javascript">

		function createVectorAdditionSample() {
			var summationMathExpression = new MathExpressions();
			var space2dimvsum = new Space2Dim("vectoraddition", 300, 300, 0, 100, 0, 100);

			function VectorSumViewModel() {
				this.p0x = ko.observable(0);
				this.p0y = ko.observable(0);

				this.a1 = ko.observable(40);
				this.a2 = ko.observable(30);

				this.b1 = ko.observable(10);
				this.b2 = ko.observable(50);

				this.c1 = ko.computed(function () { return Number(this.a1()) + Number(this.b1()); }, this);
				this.c2 = ko.computed(function () { return Number(this.a2()) + Number(this.b2()); }, this);

				this.p0x.subscribe(function (newValue) { space2dimvsum.update(); });
				this.p0y.subscribe(function (newValue) { space2dimvsum.update(); });
				this.a1.subscribe(function (newValue) { space2dimvsum.update(); summationMathExpression.QueueUpdate(); });
				this.a2.subscribe(function (newValue) { space2dimvsum.update(); summationMathExpression.QueueUpdate(); });
				this.b1.subscribe(function (newValue) { space2dimvsum.update(); summationMathExpression.QueueUpdate(); });
				this.b2.subscribe(function (newValue) { space2dimvsum.update(); summationMathExpression.QueueUpdate(); });


				var p0 = new Point2Dim(this.p0x, this.p0y);
				var a = new Point2Dim(this.a1, this.a2);
				var b = new Point2Dim(this.b1, this.b2);

				var c = new Point2Dim(this.c1, this.c2);

				//var circle1 = new Circle(p3);
				//var circle2 = new Circle(p2);

				var vector1 = new Vector2Dim(
					{ p1: p0, p2: a },
					{ name: "a", dvaluelvl: 1, p1draggable: 0, p2draggable: 1 }
				);

				var vector1t = new Vector2Dim(
					{ p1: a, p2: c },
					{ p1draggable: 0, p2draggable: 0, cssclass: "vtranslated" }
				);

				var vector2 = new Vector2Dim(
					{ p1: p0, p2: b },
					{ name: "b", dvaluelvl: 2, p1draggable: 0, p2draggable: 1 }
				);

				var vector2t = new Vector2Dim(
					{ p1: b, p2: c },
					{ p1draggable: 0, p2draggable: 0, cssclass: "vtranslated" }
				);

				var vectorsum = new Vector2Dim(
					{ p1: p0, p2: c },
					{ name: "c", dvaluelvl: 3, p1draggable: 0, p2draggable: 0, cssclass: "calcresult" }
				);

				var getMathExpression = function () {
					var p1XFormatted = d3.format(".1f")(a.getX());
					var p1YFormatted = d3.format(".1f")(a.getY());
					var p2XFormatted = d3.format(".1f")(b.getX());
					var p2YFormatted = d3.format(".1f")(b.getY());
					var pSumXFormatted = d3.format(".1f")(c.getX());
					var pSumYFormatted = d3.format(".1f")(c.getY());

					var mathExpression = "\\begin{aligned} c &= (a_1 + b_1, a_2 + b_2) \\\\"
						+ " &= (" + p1XFormatted + " + " + p2XFormatted + ", " + p1YFormatted + " + " + p2YFormatted + ") \\\\"
						+ " &= (" + pSumXFormatted + ", " + pSumYFormatted + ")"
						+ " \\end{aligned}";
					return mathExpression;
				}

				summationMathExpression.RegisterExpression("vectorsum_sample", getMathExpression);

				this.vectorsToShow = [vector1, vector2, vector1t, vector2t, vectorsum];
			}

			var vsum = new VectorSumViewModel();

			space2dimvsum.appenGlobalAttributes(Vector2Dim.global);
			space2dimvsum.registerHandler(Vector2Dim.draw, Vector2Dim.update, function () { return vsum.vectorsToShow; });
			//space2dimvsum.registerHandler(Circle.draw, function () { return vsum.circlesToShow; });
			space2dimvsum.show();

			//			ko.applyBindings(vsum);
		}


		function createVectorDiffSample() {
			var diffMathExpression = new MathExpressions();
			var space2dimvdiff = new Space2Dim("vectorsubtraction", 300, 300, -100, 100, -100, 100);

			function VectorDiffViewModel() {
				this.p0x = ko.observable(0);
				this.p0y = ko.observable(0);

				this.p1x = ko.observable(40);
				this.p1y = ko.observable(30);

				this.p2x = ko.observable(10);
				this.p2y = ko.observable(50);

				this.pdiffx = ko.computed(function () { return Number(this.p1x()) - Number(this.p2x()); }, this);
				this.pdiffy = ko.computed(function () { return Number(this.p1y()) - Number(this.p2y()); }, this);

				this.p0x.subscribe(function (newValue) { space2dimvdiff.update(); });
				this.p0y.subscribe(function (newValue) { space2dimvdiff.update(); });
				this.p1x.subscribe(function (newValue) { space2dimvdiff.update(); diffMathExpression.QueueUpdate(); });
				this.p1y.subscribe(function (newValue) { space2dimvdiff.update(); diffMathExpression.QueueUpdate(); });
				this.p2x.subscribe(function (newValue) { space2dimvdiff.update(); diffMathExpression.QueueUpdate(); });
				this.p2y.subscribe(function (newValue) { space2dimvdiff.update(); diffMathExpression.QueueUpdate(); });


				var p0 = new Point2Dim(this.p0x, this.p0y);
				var p1 = new Point2Dim(this.p1x, this.p1y);
				var p2 = new Point2Dim(this.p2x, this.p2y);

				var pdiff = new Point2Dim(this.pdiffx, this.pdiffy);

				var vector1 = new Vector2Dim(
					{ p1: p0, p2: p1 },
					{ name: "A", dvaluelvl: 1, p1draggable: 0, p2draggable: 1 }
				);

				var vector2 = new Vector2Dim(
					{ p1: p0, p2: p2 },
					{ name: "B", dvaluelvl: 2, p1draggable: 0, p2draggable: 1 }
				);

				var vector2t = new Vector2Dim(
					{ p1: p1, p2: pdiff },
					{ name: "-B", p1draggable: 0, p2draggable: 0, cssclass: "vtranslated" }
				);

				var vectordiff = new Vector2Dim(
					{ p1: p0, p2: pdiff },
					{ name: "C", dvaluelvl: 3, p1draggable: 0, p2draggable: 0, cssclass: "calcresult" }
				);

				var getMathExpression = function () {
					var p1XFormatted = d3.format(".1f")(p1.getX());
					var p1YFormatted = d3.format(".1f")(p1.getY());
					var p2XFormatted = d3.format(".1f")(p2.getX());
					var p2YFormatted = d3.format(".1f")(p2.getY());
					var pDiffXFormatted = d3.format(".1f")(pdiff.getX());
					var pDiffYFormatted = d3.format(".1f")(pdiff.getY());

					var mathExpression = "\\begin{aligned} c &= (a_1 - b_1, a_2 - b_2) \\\\"
						+ " &= (" + p1XFormatted + " - " + p2XFormatted + ", " + p1YFormatted + " - " + p2YFormatted + ") \\\\"
						+ " &= (" + pDiffXFormatted + ", " + pDiffYFormatted + ")"
						+ " \\end{aligned}";
					return mathExpression;
				}

				diffMathExpression.RegisterExpression("vectordiff_sample", getMathExpression);

				this.vectorsToShow = [vector1, vector2, vector2t, vectordiff];
			}

			var vdiff = new VectorDiffViewModel();

			space2dimvdiff.appenGlobalAttributes(Vector2Dim.global);
			space2dimvdiff.registerHandler(Vector2Dim.draw, Vector2Dim.update, function () { return vdiff.vectorsToShow; });
			space2dimvdiff.show();
		}


		function createVectorScalarMultiSample() {
			var multMathExpression = new MathExpressions();
			var space2dimvmult = new Space2Dim("vectorscalarmulti", 300, 300, -100, 100, -100, 100);

			function VectorMultViewModel() {
				this.p0x = ko.observable(0);
				this.p0y = ko.observable(0);

				this.p1x = ko.observable(40);
				this.p1y = ko.observable(30);

				this.multiplyer = ko.observable(2);

				this.pmultx = ko.computed(function () { return Number(this.p1x()) * Number(this.multiplyer()); }, this);
				this.pmulty = ko.computed(function () { return Number(this.p1y()) * Number(this.multiplyer()); }, this);

				this.p0x.subscribe(function (newValue) { space2dimvmult.update(); });
				this.p0y.subscribe(function (newValue) { space2dimvmult.update(); });
				this.p1x.subscribe(function (newValue) { space2dimvmult.update();; multMathExpression.QueueUpdate(); });
				this.p1y.subscribe(function (newValue) { space2dimvmult.update();; multMathExpression.QueueUpdate(); });
				this.multiplyer.subscribe(function (newValue) { space2dimvmult.update();; multMathExpression.QueueUpdate(); });


				var p0 = new Point2Dim(this.p0x, this.p0y);
				var p1 = new Point2Dim(this.p1x, this.p1y);
				var lambda = this.multiplyer;

				var pmult = new Point2Dim(this.pmultx, this.pmulty);

				var vector1 = new Vector2Dim(
					{ p1: p0, p2: p1 },
					{ name: "A", dvaluelvl: 1, p1draggable: 0, p2draggable: 1 }
				);

				var vectormult = new Vector2Dim(
					{ p1: p0, p2: pmult },
					{ name: "C", dvaluelvl: 2, p1draggable: 0, p2draggable: 0, cssclass: "calcresult" }
				);

				var getMathExpression = function () {
					var p1XFormatted = d3.format(".1f")(p1.getX());
					var p1YFormatted = d3.format(".1f")(p1.getY());
					var pmultXFormatted = d3.format(".1f")(pmult.getX());
					var pmultYFormatted = d3.format(".1f")(pmult.getY());
					var lambdaFormatted = d3.format(".1f")(lambda());

					var mathExpression = "\\begin{aligned}"
						+ " \\lambda &= " + lambdaFormatted + " \\\\"
						+ " c &= (\\lambda a_1, \\lambda a_2) \\\\"
						+ " &= (" + lambdaFormatted + " * " + p1XFormatted + ", " + lambdaFormatted + " * " + p1YFormatted + ") \\\\"
						+ " &= (" + pmultXFormatted + ", " + pmultYFormatted + ")"
						+ " \\end{aligned}";
					return mathExpression;
				}

				multMathExpression.RegisterExpression("vectormult_sample", getMathExpression);

				this.vectorsToShow = [vector1, vectormult];
			}

			var vmult = new VectorMultViewModel();

			space2dimvmult.appenGlobalAttributes(Vector2Dim.global);
			space2dimvmult.registerHandler(Vector2Dim.draw, Vector2Dim.update, function () { return vmult.vectorsToShow; });
			space2dimvmult.show();

			ko.applyBindings(vmult);
		}

		createVectorAdditionSample();
		createVectorDiffSample();
		createVectorScalarMultiSample();


	</script>
</body>
</html >
