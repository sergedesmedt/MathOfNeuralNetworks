<!DOCTYPE html>
<html>
<!--
to research
===========

* creeeren van een assenstelsel
* tonen van de assen
* tonen van de hoofdverdeling (zodat er een grid ontstaat)
* tonen van een vector (pijl)
* tonen van een hoek (boog met aan uiteinde een pijl)
* slepen van de vector uiteinden
* updaten van waarden in de tekst van de pagina met waarden uit de grafiek (vooral dan bij het slepen van vector uiteinden)
* updaten van waarden in  de grafiek met waarden iuit de tekst die worden aangepast

-->
<head>
	<script type="text/javascript" src="./d3/d3.js"></script>
	<style>

		svg {
			font: 10px sans-serif;
			shape-rendering: crispEdges;
		}

		rect {
			fill: #fff;
		}

		.axis path,
		.axis line {
			fill: none;
			stroke: #d7d7d7;
		}

	</style>
</head>
<body>
    <div id="viz"></div>
    <script type="text/javascript">

		var margin = { top: 20, right: 20, bottom: 20, left: 20 },
			width = 500 - margin.left - margin.right,
			height = 500 - margin.top - margin.bottom;

		var x = d3.scaleLinear()
			.domain([-width / 2, width / 2])
			.range([0, width]);

		var y = d3.scaleLinear()
			.domain([-height / 2, height / 2])
			.range([height, 0]);

		var xAxis = d3.axisBottom()
			.scale(x)
			.ticks(20)
			.tickSize(-height);

		var yAxis = d3.axisLeft()
			.scale(y)
			.ticks(20)
			.tickSize(-width);

		var svg = d3.select("body").append("svg")
			.attr("width", width + margin.left + margin.right)
			.attr("height", height + margin.top + margin.bottom);

		svg.append("g")
			.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		svg.append("rect")
			.attr("width", width)
			.attr("height", height);

		p1 = [20, 50];
		p2 = [50, 100];

		svg.append("g")
			.attr("class", "x axis")
			.attr("transform", "translate(0," + height + ")")
			.call(xAxis);

		svg.append("g")
			.attr("class", "y axis")
			.call(yAxis);

		svg.selectAll("circle")
			.data([p1, p2]).enter()
			.append("circle")
			.attr("cx", function (d) { return x(d[0]); })
			.attr("cy", function (d) { return y(d[1]); })
			.attr("r", "8px")
			.attr("fill", "red");

		let drag = d3.drag()
			.on('start', dragstarted)
			.on('drag', dragged)
			.on('end', dragended);

		svg.selectAll('circle')
			.call(drag);


		function dragstarted(d) {
			d3.select(this).raise().classed('active', true);
		}

		function dragged(d) {
			d[0] = x.invert(d3.event.x);
			d[1] = y.invert(d3.event.y);
			d3.select(this)
				.attr('cx', x(d[0]))
				.attr('cy', y(d[1]))
			//focus.select('path').attr('d', line);
		}

		function dragended(d) {
			d3.select(this).classed('active', false);
		}

    </script>
</body>
</html>
